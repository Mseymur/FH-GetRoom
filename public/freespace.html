<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Find Free Rooms - FH JOANNEUM</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="https://www.fh-joanneum.at/favicon.ico">
</head>
<body>
<header class="page-header">
    <a href="/index.html" class="back-link" aria-label="Back to Schedule">
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M11 14L5 8l6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Full Schedule</span>
    </a>
    <h1>Find Free Rooms</h1>
</header>

<main>
    <div class="location-card">
        <div class="location-info">
            <p class="campus">FH JOANNEUM Graz</p>
            <p class="building" id="currentBuildingDisplayFreespace">Loading building...</p>
        </div>
        <button class="edit-location-btn" onclick="document.cookie='currentBuilding=; Max-Age=0; path=/'; window.location.href='/';">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="1em" height="1em">
                <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
            </svg>
            Change Building
        </button>
    </div>

    <div class="controls-container">
        <div class="controls">
            <div class="control-group">
                <label for="date">Date:</label>
                <input type="date" id="date" aria-label="Select date">
            </div>

            <div class="control-group">
                <label for="time">Time:</label>
                <input type="time" id="time" step="300" aria-label="Select time">
            </div>

            <div class="control-group">
                <label for="floor">Floor:</label>
                <select id="floor" aria-label="Select floor">
                    <option value="">All Floors</option>
                </select>
            </div>

            <div class="control-group">
                <label for="room">Room:</label>
                <select id="room" aria-label="Select room">
                    <option value="">All Rooms</option>
                </select>
            </div>
        </div>
    </div>

    <div id="message-area">
        <div id="loading-indicator" class="message" style="display:none;">
            <svg class="loading-spinner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                <path fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
            </svg>
            Loading...
        </div>
        <div id="error-message" class="message error" style="display:none;"></div>
    </div>

    <section id="free-now-section">
        <div class="section-header">
            <h2>Free Now <span id="free-now-time-display"></span></h2>
        </div>
        <ul id="free-now-list" class="room-list"></ul>
        <button id="free-now-show-more" class="button-secondary show-more-button" style="display:none;">Show More</button>
        <br>
    </section>

   

    <section id="all-day-free-section" style="display:none;">
        <div class="section-header">
            <h2 id="all-day-title">All Free Slots from Selected Time</h2>
        </div>
        <ul id="all-day-free-list" class="room-list"></ul>
        <button id="all-day-show-more" class="button-secondary show-more-button" style="display:none;">Show More</button>
        <br>
    </section>

    <section id="available-soon-section">
        <div class="section-header">
            <h2>Available Soon <small>(≥45 min, after <span id="available-soon-time-display"></span>)</small></h2>
        </div>
        <ul id="available-soon-list" class="room-list"></ul>
        <button id="available-soon-show-more" class="button-secondary show-more-button" style="display:none;">Show More</button>
    </section>

    <div id="room-schedule-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Schedule for <span id="modal-room-name"></span> on <span id="modal-room-date"></span></h2>
                <button id="modal-close-button" class="close-button" aria-label="Close modal">✕</button>
            </div>
            <div class="modal-body">
                <ul id="modal-room-schedule-list" class="schedule-list"></ul>
                <p id="modal-no-events" class="message" style="display:none;">No scheduled events for this room.</p>
            </div>
        </div>
        <div class="modal-backdrop"></div>
    </div>
</main>

<footer>
    <br>
    <p>© FH JOANNEUM University of Applied Sciences</p>
    <p class="footer-links">
        <a href="https://www.fh-joanneum.at" target="_blank" rel="noopener">FH JOANNEUM Website</a>
        <span class="separator">|</span>
        <a href="https://www.fh-joanneum.at/impressum" target="_blank" rel="noopener">Imprint</a>
    </p>
</footer>

<script src="js/freespace-app.js"></script>
</body>
</html>
